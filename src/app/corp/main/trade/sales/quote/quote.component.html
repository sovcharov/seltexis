<div class="" style="padding: 10px;">
    <div *ngIf = "!arrayToQuote.length">
        <div class="form-group">
        <label for="exampleFormControlTextarea1">Вставьте номера в столбик с количеством через пробел (Работает copy-paste из xls).</label>
        <textarea class="form-control" id="exampleFormControlTextarea1" rows="10" [(ngModel)]="boldText" name = "boldText"></textarea>
        </div>
        <div class="input-group">
            <!-- <div class="btn-group" role="group" aria-label="Basic example"> -->
            <button class="btn btn-outline-secondary"
                    *ngIf="1" type=""
                    (click)="checkBoldText()" style = "margin-right: 5px;">Проверить</button>
            <button class="btn btn-outline-secondary text-right"
                *ngIf="1" type=""
                (click)="clearForm()">Очистить</button>
            <!-- </div> -->
        </div>
        <div style = "white-space: pre-wrap; margin-top:10px">
            <strong>Пример:</strong><br>
            197-9330 2<br>
            197-9322 6<br>
            <strong>Без количества</strong><br>
            197-9330<br>
            1979322<br>
        </div>
    </div>
    <div *ngIf = "arrayToQuote.length">
        <div class="input-group mb-4">
                <input type="text" autofocus="autofocus" style="display:none" />
                <button class="btn btn-outline-secondary"
                type=""
                (click)="startOver()" style = "margin-right: 15px;"><- В начало</button>
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" for="inputGroupSelect01" disabled>Скидка %</button>
                    <input type="text" class="form-control" value = "{{discount}}" [(ngModel)] = "discount" name = "discount" style = "width: 50px; text-align: center; font-weight: bold; color: orangered;">
                    <button class="btn btn-outline-secondary" type="" (click)="discount = discount - 1" style = "width: 40px; ">-</button>                   
                    <button class="btn btn-outline-secondary" type="" (click)="discount = discount + 1" style = "width: 40px;">+</button>
                    <button class="btn btn-outline-secondary" type="" (click)="discount = 0" style = "width: 40px;"[ngClass] = "discount === 0 ? 'btn-warning' : 'btn-outline-secondary'">0</button>
                    <button class="btn btn-outline-secondary" type="" (click)="discount = 5" style = "width: 40px;" [ngClass] = "discount === 5 ? 'btn-warning' : 'btn-outline-secondary'">5</button>
                    <button class="btn btn-outline-secondary" type="" (click)="discount = 10" style = "width: 40px;"[ngClass] = "discount === 10 ? 'btn-warning' : 'btn-outline-secondary'">10</button>
                    <button class="btn btn-outline-secondary" type="" (click)="discount = 15" style = "width: 40px;"[ngClass] = "discount === 15 ? 'btn-warning' : 'btn-outline-secondary'">15</button>

                    <button class="btn btn-outline-secondary" type="" (click)="setDescriptionToFinalForAll(); createPlainText();" *ngIf = "quoted">Пересчитать</button>
                </div>
        </div>
        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups" style = "margin-bottom: 10px;">
            <div class="btn-group mr-2" role="group" aria-label="First group">
                <button class="btn btn-outline-secondary" for="inputGroupSelect01" disabled>Искомые:</button>
                <button type="button" class="btn btn-outline-secondary" (click)="listVars.includeSearchNumber = !listVars.includeSearchNumber" [ngClass] = "listVars.includeSearchNumber ? 'btn-warning' : 'btn-outline-secondary'">Фраза</button>
                <button type="button" class="btn btn-outline-secondary" (click)="listVars.includeSearchQty = !listVars.includeSearchQty" [ngClass] = "listVars.includeSearchQty ? 'btn-warning' : 'btn-outline-secondary'">Кол</button>
            </div>
            <div class="btn-group mr-2" role="group" aria-label="Second group">                
                <button type="button" class="btn btn-outline-secondary" (click)="listVars.includeDescription = !listVars.includeDescription" [ngClass] = "listVars.includeDescription ? 'btn-warning' : 'btn-outline-secondary'">Описание</button>
                <button type="button" class="btn btn-outline-secondary"(click)="listVars.includeNumber = !listVars.includeNumber" [ngClass] = "listVars.includeNumber ? 'btn-warning' : 'btn-outline-secondary'">Номер</button>
                <button type="button" class="btn btn-outline-secondary"(click)="listVars.includeManufacturer = !listVars.includeManufacturer" [ngClass] = "listVars.includeManufacturer ? 'btn-warning' : 'btn-outline-secondary'">Производитель</button>
            </div>
            <div class="btn-group mr-2" role="group" aria-label="Second group">
              <button type="button" class="btn btn-outline-secondary"(click)="listVars.includeMsk = !listVars.includeMsk" [ngClass] = "listVars.includeMsk ? 'btn-warning' : 'btn-outline-secondary'">МСК</button>
              <button type="button" class="btn btn-outline-secondary"(click)="listVars.includeSpb = !listVars.includeSpb" [ngClass] = "listVars.includeSpb ? 'btn-warning' : 'btn-outline-secondary'">СПб</button>
              <button type="button" class="btn btn-outline-secondary"(click)="listVars.includeOrdered = !listVars.includeOrdered" [ngClass] = "listVars.includeOrdered ? 'btn-warning' : 'btn-outline-secondary'">Едет</button>
            </div>
            <div class="btn-group" role="group" aria-label="Third group">
              <button type="button" class="btn btn-outline-secondary" (click)="setDescriptionToFinalForAll(); createPlainText();" *ngIf = "quoted">Переделать</button>
            </div>
        </div>
        <ng-container *ngFor="let number of arrayToQuote; let i = index">   
            <div class="alert alert-secondary fade show" role="alert">
                <strong>{{number.searchPhrase}}</strong> - {{number.qty}} шт.
                <button type="button" class="close" aria-label="Close" (click)="deleteNumber(i)">
                  <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div *ngIf = "getSearchResultsLength(i)" >
                <ng-container *ngFor="let search of number.searchResults; let j = index">  
                    <div class="input-group input-group-sm mb-3">
                        <input type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" style="font-size:12px;" value = "{{search.descriptionToFinal}}" [(ngModel)] = "search.descriptionToFinal" name = "search">
                        <div class="input-group-append">
                            <label *ngIf = "search.allNumbers" class="input-group-text" for="inputGroupSelect01" style="font-size:12px;">{{search.allNumbers[0].manufacturer}}</label>
                            <label class="input-group-text" for="inputGroupSelect01" style="font-size:12px;">{{search.msk}}-{{search.stock}}-{{search.ordered}}</label>
                            <button [ngClass] = "search.toTheFinalList ? 'btn-warning' : 'btn-outline-secondary'" class="btn btn-outline-secondary" type="" (click)="search.toTheFinalList = !search.toTheFinalList; createPlainText();" style="font-size:12px;">Добавить <strong *ngIf="search.toTheFinalList">V</strong></button>
                        </div>
                      </div>
                    <!-- <div>{{search.description}} {{search.number}}</div> -->
        
                </ng-container>
            </div>

        </ng-container>

        
        <div class="input-group">
            <button class="btn btn-outline-secondary btn-sm"
                    *ngIf="!quoted" type=""
                    (click)="sendToQuote()"style = "margin-right: 5px;">Расценить</button> 
        </div>
        <div class="input-group" *ngIf="finalPlainText.length">
            Текст для отправки:
            <!-- <button class="btn btn-outline-secondary btn-sm"
                    type=""
                    (click)="createPlainText()"style = "margin-right: 5px;">Сформировать</button>  -->
        </div>
        <div style="margin-top:10px;" *ngIf="finalPlainText.length">
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="10" [(ngModel)]="finalPlainText" name = "finalPlainText" style = "font-size:14px;"></textarea>
        </div>
    </div>
</div>